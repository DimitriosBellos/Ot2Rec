Bootstrap: docker
From: quay.io/rosalindfranklininstitute/ot2rec:latest
	
%environment
	export MANPATH=/usr/local/imod/IMOD/man:/opt/lmod/lmod/share/man:
	export IMOD_CALIB_DIR=/usr/local/ImodCalib 
	export IMOD_DIR=/usr/local/imod/IMOD
	export IMOD_JAVADIR=/usr/local/java
	export IMOD_PLUGIN_DIR=/usr/local/imod/IMOD/lib/imodplug 
	export IMOD_QTLIBDIR=/usr/local/imod/IMOD/qtlib
	export PATH=/usr/local/imod/IMOD/bin:/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
	
%runscript
	#!/bin/bash
	if [[ $# == 2 ]]; then
		o2r.$1 $2
	elif [[ $# == 3 ]]; then
		o2r.$1.$2 $3
	else
		echo "Incorrect number of arguments, see https://github.com/rosalindfranklininstitute/Ot2Rec for command details"
		exit 1
	fi

